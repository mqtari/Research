<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø­ÙˆØ«Ø§Øª Ø¹Ù„Ù…ÙŠÙ‡</title>
<style>
body { font-family: system-ui, sans-serif; background:#f4f4f9; margin:0; padding:15px; color:#222; }
.box { max-width:720px; margin:15px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
input { width:100%; padding:12px; border:2px solid #eee; border-radius:10px; font-size:16px; box-sizing:border-box; }
input:focus { border-color:#007bff; outline:none; }
button { width:100%; padding:12px; border:none; border-radius:10px; background:#007bff; color:#fff; font-weight:700; margin-top:10px; cursor:pointer; }
button:disabled { background:#bbb; cursor:not-allowed; }
#results { max-width:720px; margin:12px auto; }
.item { background:#fff; padding:14px; border-radius:10px; margin-top:12px; box-shadow:0 2px 6px rgba(0,0,0,0.05); border-right:5px solid #007bff; }
h3 { margin:0 0 8px; font-size:16px; }
p { margin:5px 0; font-size:14px; color:#444; line-height:1.4; }
.btn { display:inline-block; padding:8px 12px; border-radius:8px; background:#28a745; color:#fff; font-weight:600; text-decoration:none; cursor:pointer; }
</style>
</head>
<body>

<div class="box">
<input id="query" placeholder="Ø§ÙƒØªØ¨ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¨Ø­Ø« Ù‡Ù†Ø§..." autocomplete="off">
<button id="btn" onclick="startSearch()">Ø§Ø¨Ø­Ø« Ø§Ù„Ø¢Ù†</button>
</div>

<div id="results"></div>

<script>
let currentSearchId = 0;

async function startSearch() {
    const query = document.getElementById('query').value.trim();
    const btn = document.getElementById('btn');
    const resultsDiv = document.getElementById('results');

    resultsDiv.innerHTML = '';
    if (!query) return;

    currentSearchId++;
    const thisSearchId = currentSearchId;
    btn.disabled = true;

    try {
        // Ø·Ù„Ø¨ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ù€ API
        const url = `https://api.semanticscholar.org/graph/v1/paper/search?query=${encodeURIComponent(query)}&limit=20&fields=title,abstract,openAccessPdf`;
        const res = await fetch(url);
        const data = await res.json();

        if (!data || !data.data || data.data.length === 0) return;

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙˆØ±Ù‹Ø§
        data.data.forEach(paper => {
            if (thisSearchId !== currentSearchId) return;
            if (!paper.openAccessPdf || !paper.openAccessPdf.url) return;

            const card = document.createElement('div');
            card.className = 'item';

            const title = paper.title || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…ØªÙˆÙØ±";
            const abstract = paper.abstract ? (paper.abstract.substring(0, 220) + "...") : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø®Øµ.";

            card.innerHTML = `
                <h3>${title}</h3>
                <p>${abstract}</p>
                <a class="btn" href="${paper.openAccessPdf.url}" target="_blank" rel="noopener">ğŸ“‚ ÙØªØ­ PDF</a>
            `;
            resultsDiv.appendChild(card);
        });

    } catch (e) {
        // ØªØ¬Ø§Ù‡Ù„ Ø£ÙŠ Ø®Ø·Ø£
    } finally {
        btn.disabled = false;
    }
}

// Ø¯Ø¹Ù… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
document.getElementById('query').addEventListener('keydown', (e)=>{
    if(e.key==='Enter') startSearch();
});
</script>

</body>
</html>
